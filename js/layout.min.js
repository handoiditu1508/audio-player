let inputId="audioInput",listElements=[],playOrder=[],playOrderIndex=null;function getInputAudios(){let a=document.getElementById(inputId);return a.files}function getPlayer(){return document.getElementById("player")}function getList(){return document.getElementById("playList")}function shuffle(a){for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}return a}function play(a){let b=getInputAudios();if(FileReader&&b&&b.length>a){let c=new FileReader,d=getPlayer();c.onload=function(){d.src=c.result,d.play()},c.readAsDataURL(b[a])}}function playNext(){playOrder[playOrderIndex].classList.remove("playing"),playOrder.length>playOrderIndex+1?playOrderIndex++:playOrderIndex=0,play(playOrder[playOrderIndex].getAttribute("index")),playOrder[playOrderIndex].classList.add("playing")}function playPrevious(){playOrder[playOrderIndex].classList.remove("playing"),-1<playOrderIndex-1?playOrderIndex--:playOrderIndex=playOrder.length-1,play(playOrder[playOrderIndex].getAttribute("index")),playOrder[playOrderIndex].classList.add("playing")}function shuffleList(){for(let a,b=playOrder.length-1;0<b;b--)a=Math.floor(Math.random()*(b+1)),[playOrder[b],playOrder[a]]=[playOrder[a],playOrder[b]],b==playOrderIndex?playOrderIndex=a:a==playOrderIndex&&(playOrderIndex=b)}function unshuffleList(){playOrderIndex=parseInt(playOrder[playOrderIndex].getAttribute("index")),playOrder=[...listElements]}document.getElementById("nextBtn").addEventListener("mouseup",()=>playNext()),document.getElementById("previousBtn").addEventListener("mouseup",()=>playPrevious()),document.getElementById("shuffleBtn").addEventListener("mouseup",()=>shuffleList()),document.getElementById("unshuffleBtn").addEventListener("mouseup",()=>unshuffleList());function handleListItemClickEvent(a){for(play(a.getAttribute("index")),playOrder[playOrderIndex].classList.remove("playing"),a.classList.add("playing"),i=0;i<playOrder.length;i++)if(playOrder[i]==a){playOrderIndex=i;break}}document.getElementById("audioInput").addEventListener("change",a=>{let b=a.target||window.event.srcElement,c=b.files,d=0;if(FileReader&&c&&c.length){let a=new FileReader;a.onload=function(){getPlayer().src=a.result},a.readAsDataURL(c[d])}else return void alert("Not supported");let e=getList();e.innerHTML="";let f=document.createElement("DIV");for(i=0;i<c.length;i++){let a=document.createElement("LI");a.classList.add("media-list-item"),i==d&&a.classList.add("playing"),a.setAttribute("index",i);let b=c[i].name;b=b.substring(0,b.lastIndexOf(".")),a.innerHTML=b,a.setAttribute("onmouseup","handleListItemClickEvent(this)"),f.appendChild(a)}e.innerHTML=f.innerHTML,listElements=[...e.children],playOrder=[...listElements],playOrderIndex=d}),getPlayer().addEventListener("ended",function(){playOrder.length>playOrderIndex+1&&(playOrder[playOrderIndex].classList.remove("playing"),play(playOrder[++playOrderIndex].getAttribute("index")),playOrder[playOrderIndex].classList.add("playing"))});